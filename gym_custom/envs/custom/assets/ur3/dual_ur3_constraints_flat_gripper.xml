<?xml version="1.0" encoding="utf-8"?>

<mujoco>
    <!--Constraints-->
    <equality>
        
        <!-- Gripper Couplings (right) -->
        <connect body1="right_gripper:right_follower_link" body2="right_gripper:right_coupler" anchor="0 0 0" solref="0.02 0.15" />
        <connect body1="right_gripper:right_follower_link" body2="right_gripper:right_spring_link" anchor="0.004 0.0175 0" solref="0.02 0.15" />
        <connect body1="right_gripper:left_follower_link" body2="right_gripper:left_coupler" anchor="0 0 0" solref="0.02 0.15" />
        <connect body1="right_gripper:left_follower_link" body2="right_gripper:left_spring_link" anchor="0.004 0.0175 0" solref="0.02 0.15" />
        <joint name="right_gripper:symmetry" joint1="right_gripper:right_fingertip:slide:control" joint2="right_gripper:left_fingertip:slide:control" 
            polycoef="0 1 0 0 0" />
        <!-- <joint name="right_flat_gripper:symmetry" joint1="right_gripper:r_gripper_finger_joint" joint2="right_gripper:l_gripper_finger_joint" 
            polycoef="0 1 0 0 0" /> -->
        <!-- sync robotiq gripper & flat gripper -->
        <!-- <connect body1="right_gripper:right_follower_link" body2="right_gripper:r_gripper_finger_link" anchor="0.004 0.0175 0" solref="0.02 0.15" />
        <connect body1="right_gripper:left_follower_link" body2="right_gripper:l_gripper_finger_link" anchor="0.004 0.0175 0" solref="0.02 0.15" /> -->
        <!-- <joint name="right_flat_gripper:sync_with_robotiq_r" joint1="right_gripper:r_gripper_finger_joint" joint2="right_gripper:right_fingertip:slide:control" 
            polycoef="0 1 0 0 0" />
        <joint name="right_flat_gripper:sync_with_robotiq_l" joint1="right_gripper:l_gripper_finger_joint" joint2="right_gripper:left_fingertip:slide:control" 
            polycoef="0 1 0 0 0" /> -->
        <!-- <weld body1="right_gripper:right_follower_link" body2="right_gripper:r_gripper_finger_link" solimp="0.9 0.95 0.001" solref="0.02 1"></weld>
        <weld body1="right_gripper:left_follower_link" body2="right_gripper:l_gripper_finger_link" solimp="0.9 0.95 0.001" solref="0.02 1"></weld> -->
        <weld body1="right_gripper:right_dummy_body_for_weld" body2="right_gripper:r_gripper_finger_link" solimp="0.9 0.95 0.001" solref="0.02 1"></weld>
        <weld body1="right_gripper:left_dummy_body_for_weld" body2="right_gripper:l_gripper_finger_link" solimp="0.9 0.95 0.001" solref="0.02 1"></weld>

        <!-- Gripper Couplings (left) -->
        <connect body1="left_gripper:right_follower_link" body2="left_gripper:right_coupler" anchor="0 0 0" solref="0.02 0.15" />
        <connect body1="left_gripper:right_follower_link" body2="left_gripper:right_spring_link" anchor="0.004 0.0175 0" solref="0.02 0.15" />
        <connect body1="left_gripper:left_follower_link" body2="left_gripper:left_coupler" anchor="0 0 0" solref="0.02 0.15" />
        <connect body1="left_gripper:left_follower_link" body2="left_gripper:left_spring_link" anchor="0.004 0.0175 0" solref="0.02 0.15" />
        <joint name="left_gripper:symmetry" joint1="left_gripper:right_fingertip:slide:control" joint2="left_gripper:left_fingertip:slide:control" 
            polycoef="0 1 0 0 0" />
        <!-- <joint name="left_flat_gripper:symmetry" joint1="left_gripper:r_gripper_finger_joint" joint2="left_gripper:l_gripper_finger_joint" 
            polycoef="0 1 0 0 0" /> -->
        <!-- sync robotiq gripper & flat gripper -->
        <!-- <connect body1="left_gripper:right_follower_link" body2="left_gripper:r_gripper_finger_link" anchor="0.004 0.0175 0" solref="0.02 0.15" />
        <connect body1="left_gripper:left_follower_link" body2="left_gripper:l_gripper_finger_link" anchor="0.004 0.0175 0" solref="0.02 0.15" /> -->
        <!-- <joint name="left_flat_gripper:sync_with_robotiq_r" joint1="left_gripper:r_gripper_finger_joint" joint2="left_gripper:right_fingertip:slide:control" 
            polycoef="0 1 0 0 0" />
        <joint name="left_flat_gripper:sync_with_robotiq_l" joint1="left_gripper:l_gripper_finger_joint" joint2="left_gripper:left_fingertip:slide:control" 
            polycoef="0 1 0 0 0" /> -->
        <!-- <weld body1="left_gripper:right_follower_link" body2="left_gripper:r_gripper_finger_link" solimp="0.9 0.95 0.001" solref="0.02 1"></weld>
        <weld body1="left_gripper:left_follower_link" body2="left_gripper:l_gripper_finger_link" solimp="0.9 0.95 0.001" solref="0.02 1"></weld> -->
        <weld body1="left_gripper:right_dummy_body_for_weld" body2="left_gripper:r_gripper_finger_link" solimp="0.9 0.95 0.001" solref="0.02 1"></weld>
        <weld body1="left_gripper:left_dummy_body_for_weld" body2="left_gripper:l_gripper_finger_link" solimp="0.9 0.95 0.001" solref="0.02 1"></weld>
    </equality>
</mujoco>